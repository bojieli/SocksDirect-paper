\section*{Abstract}

Linux socket is implemented in the kernel space with shared data structures that needs concurrency protection, which incurs significant overhead.
Communication intensive applications in hosts with multi-core CPU and high-speed networking hardware often put considerable stress on the socket system.
Recent work on user-space sockets either does not support intra-host communication among containers and applications, or has limitations on compatibility, isolation and multi-thread scalability.
%Communication intensive applications on modern computers with multi-core CPU and high-speed networking hardware 
%often put considerable stress on traditional socket implementation. 
%This design incurs significant kernel crossing and locking overhead.
%Recent user-space sockets often do not support intra-host communication among containers and applications, or have limitations on compatibility, isolation and scalability with multiple threads and concurrent connections.

%In this paper, we describe \sys{}, a high performance socket system that is fully compatible with Linux and can be used as a drop-in replacement with no modification to applications.
%\sys{} is implemented in user space to avoid kernel crossing cost and simplify deployment.
%Each host runs a monitor daemon to securely process the control plane, while the data plane bypasses the monitor.
%We achieve multi-thread scalability by considering threads as a shared-nothing message passing distributed system.
%To improve memory locality, we multiplex all connections and event notifications between a pair of threads via one queue.
%We use a high performance shared memory queue for intra-host communication.
%For inter-host communication, we take advantage of modern RDMA hardware, but can also transparently communicate with regular TCP/IP endpoints.
%Together with carefully designed zero-copy mechanism and cooperative multitasking, it removes many overheads of existing socket systems.
%Experiment shows that \sys{} achieves 4 to 24x message throughput, 10 to 60x better latency, and over 40x connection setup throughput compared with Linux socket.


In this paper, we describe \sys{}, a high performance socket system. \sys{} is implemented in user space to avoid kernel crossing cost. 
It achieves security and isolation by employing a trusted monitor daemon to handle control plane operations such as connection establishment and access control. 
\sys{} is fully compatible with Linux socket and can be used as a drop-in replacement with no modification to existing applications. The design fully
handles Linux fork semantics, and can handle both intra- and inter-host communications with hosts equipped with \sys{} as well as those without. 
Last but not least, \sys{} is performant. \sys{} uses shared memory queue and modern RDMA transport for intra- and inter-host communication.
It removes multi-thread synchronization in common cases and improves memory efficiency with many concurrent connections.
It leverages techniques such as cooperative multitasking and page-remapping based zero-copy to remove many overheads of existing socket systems.
Experiment shows that \sys achieves 7 to 20x better message throughput, 17 to 35x better latency, and 20x connection setup throughput compared with Linux socket.

