\section{Implementation}
\label{sec:implementation}

How many lines of code...

The implementation section discusses some less important details in the design.


For compatibility
LD\_PRELOAD.
Separate file descriptors in \sys and Linux. Linux use low FD space, \sys use high FD space. Same as LOS (APNet'17).

Thread can access file descriptors created by other threads. Resolution: give each thread a unique file descriptor space (similar to thread stack). If a thread access a file descriptor owned by another thread, process it like pthread\_create.

Access local storage. Use SPDK and user-mode file system (cite). How to multiplex processes in accessing a file system? (1) directory and metadata go to monitor, (2) read/write within allocated area of a file: process self, (3) append or read/write outside allocated area: handled by master process of a shared file. Monitor pre-allocate free blocks to processes (batch allocation and free).

Discuss limitations: order (linux is sequentially consistent, ours is FIFO).